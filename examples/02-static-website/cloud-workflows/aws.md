# AWS Workflow for Static Website

This guide shows the commands and prompts to deploy a static website on AWS using IaC Spec Kit.

> **Note**: The specific files, directory names, and some outputs are generated by the AI and will vary depending on your AI tool (Bob, Claude, Copilot, Gemini, etc.) and the LLM model being used. The workflow structure and file types remain consistent.

## Prerequisites

- AWS account with IAM permissions
- IaC Spec Kit installed (`iac-specify check`)
- Terraform installed
- AI coding assistant running in your project directory
- (Optional) Domain name registered in Route 53 or external registrar

## Commands

### Step 1: Establish Project Principles

```
/iac.principles I'm deploying a simple marketing website on AWS. Keep costs low, use managed services, use Terraform.
```

**Generates**: `.specify/memory/principles.md`

---

### Step 2: Describe What You Want

```
/iac.specify I need to host a static marketing website with HTML, CSS, and JavaScript files. Should load fast globally using a CDN. Need HTTPS support and ideally a custom domain. Budget is minimal, under $10/month for low to moderate traffic.
```

**Generates**:
- `spec.md` in a feature directory
- `checklists/requirements.md`

**spec.md** contains a cloud-agnostic specification. For example, functional requirements might include:
- Object storage for static files with public read access
- Static website hosting capability
- Content delivery network for global distribution
- SSL/TLS certificate for HTTPS
- Custom domain support
- Cache invalidation capability

Uses generic terms rather than cloud-specific services. Specific sections and detail vary by AI tool and LLM model.

---

### Step 3: Clarify Requirements (Optional)

```
/iac.clarify
```

**Updates**: `spec.md` with your answers integrated

---

### Step 4: Create Implementation Plan

**Option A - Minimal**:
```
/iac.plan
```

**Option B - With custom domain**:
```
/iac.plan I have the domain example.com registered. Use CloudFront and S3.
```

**Generates**:
- `plan.md`, `research.md`, `architecture.md`, `modules.md`, `quickstart.md`

**plan.md** example architecture:
- Storage: S3 bucket with static website hosting enabled
- CDN: CloudFront distribution with edge locations worldwide
- SSL: ACM certificate for HTTPS
- DNS: Route 53 hosted zone for custom domain (if applicable)

Specific services vary by AI tool and LLM model.

**research.md** may include Well-Architected Framework mappings and terraform-aws-modules. Content varies by AI tool and LLM model.

---

### Step 5: Generate Task Breakdown

```
/iac.tasks
```

**Generates**: `tasks.md`

**tasks.md** example tasks:
- Create S3 bucket with website hosting in iac/s3.tf
- Configure CloudFront distribution in iac/cloudfront.tf
- Request ACM certificate in iac/acm.tf
- Set up Route 53 records in iac/route53.tf (if using custom domain)
- Configure bucket policy and CORS in iac/policies.tf

Specific tasks vary by AI tool and LLM model.

---

### Step 6: Implement Infrastructure Code

```
/iac.implement
```

**Generates**: Terraform files. Example files might include:
- backend.tf (S3 state storage)
- provider.tf (AWS provider)
- s3.tf (S3 bucket with website config)
- cloudfront.tf (CDN distribution), acm.tf (SSL certificate)
- route53.tf (DNS records), policies.tf (bucket policy)
- outputs.tf

The AI runs `terraform fmt` and `terraform validate`. Specific files vary by AI tool and LLM model.

**Updates**: `tasks.md` with completed tasks

---

## What Happens Next

After `/iac.implement`:

1. **Review code**: `cd iac/ && ls -la`
2. **Initialize**: `terraform init`
3. **Review plan**: `terraform plan`
4. **Deploy**: `terraform apply` (creates real resources and costs)
5. **Upload content**:
   ```bash
   aws s3 sync ./website-files s3://your-bucket-name/
   aws cloudfront create-invalidation --distribution-id YOUR_DIST_ID --paths "/*"
   ```
6. **Access site**: Visit CloudFront URL or custom domain

---

## Files Generated Summary

| Command | Files Created | Purpose |
|---------|---------------|---------|
| `/iac.principles` | `principles.md` | Project governance rules |
| `/iac.specify` | `spec.md`, `checklists/requirements.md` | Cloud-agnostic requirements |
| `/iac.clarify` | Updates `spec.md` | Resolves ambiguities |
| `/iac.plan` | `plan.md`, `research.md`, `architecture.md`, `modules.md`, `quickstart.md` | AWS-specific architecture |
| `/iac.tasks` | `tasks.md` | Ordered task breakdown |
| `/iac.implement` | `*.tf` files | Terraform code ready for deployment |
