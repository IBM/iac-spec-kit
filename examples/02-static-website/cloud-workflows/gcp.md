# GCP Workflow for Static Website

This guide shows the commands and prompts to deploy a static website on Google Cloud Platform using IaC Spec Kit.

> **Note**: The specific files, directory names, and some outputs are generated by the AI and will vary depending on your AI tool (Bob, Claude, Copilot, Gemini, etc.) and the LLM model being used. The workflow structure and file types remain consistent.

## Prerequisites

- GCP project with billing enabled
- IaC Spec Kit installed (`iac-specify check`)
- Terraform installed
- AI coding assistant running in your project directory

## Commands

### Step 1: Establish Project Principles

```
/iac.principles This is a simple marketing website. Keep it simple and cost-effective. Focus on security and reliability. Use Terraform.
```

**Generates**: `.specify/memory/principles.md`

---

### Step 2: Describe What You Want

```
/iac.specify I need to host a static marketing website with HTML, CSS, and JavaScript files. Should load fast globally using a CDN. Need HTTPS support and ideally a custom domain. Budget is minimal, under $10/month for low to moderate traffic.
```

**Generates**: `spec.md`, `checklists/requirements.md`

**spec.md** contains cloud-agnostic requirements for object storage, CDN, SSL/TLS, and custom domain support. Specific sections vary by AI tool and LLM model.

---

### Step 3: Clarify Requirements (Optional)

```
/iac.clarify
```

**Updates**: `spec.md`

---

### Step 4: Create Implementation Plan

**Option A - Minimal**:
```
/iac.plan
```

**Option B - With custom domain**:
```
/iac.plan I have the domain example.com. Use Cloud CDN and Cloud Storage.
```

**Generates**: `plan.md`, `research.md`, `architecture.md`, `modules.md`, `quickstart.md`

**plan.md** example architecture:
- Storage: Cloud Storage bucket with website configuration
- CDN: Cloud CDN with backend bucket
- SSL: Google-managed SSL certificate
- DNS: Cloud DNS zone for custom domain (if applicable)
- Load Balancer: HTTPS load balancer as CDN frontend

Specific services vary by AI tool and LLM model.

---

### Step 5: Generate Task Breakdown

```
/iac.tasks
```

**Generates**: `tasks.md`

**tasks.md** example tasks:
- Create Cloud Storage bucket in iac/storage.tf
- Configure backend bucket and CDN in iac/cdn.tf
- Set up HTTPS load balancer in iac/lb.tf
- Configure SSL certificate in iac/ssl.tf
- Set up Cloud DNS zone in iac/dns.tf (if custom domain)

Specific tasks vary by AI tool and LLM model.

---

### Step 6: Implement Infrastructure Code

```
/iac.implement
```

**Generates**: Terraform files. Example files might include:
- backend.tf, provider.tf
- storage.tf (Cloud Storage bucket)
- cdn.tf (backend bucket), lb.tf (load balancer), ssl.tf
- dns.tf, outputs.tf

The AI runs `terraform fmt` and `terraform validate`. Specific files vary by AI tool and LLM model.

---

## What Happens Next

After `/iac.implement`:

1. Review code, initialize Terraform, review plan
2. Deploy: `terraform apply`
3. Upload content:
   ```bash
   gsutil -m rsync -r ./website-files gs://your-bucket-name/
   ```
4. Access via load balancer IP or custom domain

---

## Files Generated Summary

| Command | Files Created | Purpose |
|---------|---------------|---------|
| `/iac.principles` | `principles.md` | Project governance rules |
| `/iac.specify` | `spec.md`, `checklists/requirements.md` | Cloud-agnostic requirements |
| `/iac.plan` | `plan.md`, `research.md`, `architecture.md`, etc. | GCP-specific architecture |
| `/iac.tasks` | `tasks.md` | Ordered task breakdown |
| `/iac.implement` | `*.tf` files | Terraform code |
